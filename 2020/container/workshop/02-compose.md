## 演習2日目: Docker Compose を使ってみる

### Docker Compose とは？
Docker Compose は、その名の通り Docker コンテナを組み合わせ、組み立ててシステムを作るためのソフトウェアです。  

### Docker Compose でできること

docker run だと、スクリプトで管理するのが大変です。  
Docker Compose なら、`docker-compose.yaml` というファイルであるべき姿を管理できます。  
また、Rails と Rails が利用する DB を両方上げるなど、複数のコンテナを起動してそれぞれを簡単に連携できるように設定ができます。  

### 演習2.1: DB を利用するアプリケーションを Docker Compose で実行する
みんな大好き Wordpress を Docker Compose を利用して起動してみましょう。  
Wordpress には、本体と DB が必要です。  
本体は[公式](https://hub.docker.com/_/wordpress/)の `wordpress` イメージを、DB も[公式](https://hub.docker.com/_/mysql/)の `mysql` イメージを使ってみましょう。  
docker-compose.yaml の書き方は、以下のリンクを参考にしてください。  

https://docs.docker.jp/compose/compose-file.html

### 演習2.2: 謎のアプリケーションを Docker Compose で実行する
謎の Web アプリケーションを構築し、リクエストを受けられる状態まで組み立ててみましょう。
`takutakahashi/blackbox-webapp` というイメージを用意したので、あとは頑張ってください！  
`/` のパスでリクエストしたらとある文字列が返ってきますので、それを僕にスレで教えてください。  

### 追加演習1: Wordpress を SSL 対応する
プロダクションでは、web アプリケーションは基本的に https で配信をします。  
Wordpress も SSL で配信してみましょう。  
「オレオレ証明書」と呼ばれる、自己署名証明書を使いましょう。  

### 追加演習2: 謎のアプリケーションにはいろいろ謎がある
謎のアプリケーションには、いろいろな仕掛けが施されています。  
計4つ仕掛けてあるので、全て探してみましょう。  
それぞれ答えには動物の種類が文字列で入っています。さあなんでしょう？  
バイナリ解析すると全部分かるのでそれは禁止です。  

### 追加演習3: 自分で DB にアクセスするアプリを作って動かしてみる
自分で DB に接続するアプリを作成し、動かしてみてください。  
研修で Rails チュートリアルをやっているのであれば、そちらのアプリを動かすのでかまいません。  

### 追加演習4: Docker Compose っぽいことを行うスクリプトを作成する
Docker Compose っぽいことを行うスクリプトを作成し、実行してシステムが動くことを確認してください。  
以下の条件を満たしてください。  

- `docker-compose up -d` 相当の動作をする (バックグラウンドで起動)
- 動作させるアプリケーションは、演習2.2 で利用した謎のアプリケーション
- 謎のアプリケーションで依存しているシステムに利用するホスト名は、`host1` と `host2` の２つ
- takutaka が手元で実行して実行できる状態にする
- `--net host` は利用しない

### 追加課題5: docker-compose のカスタムネットワークを利用する

https://docs.docker.jp/compose/networking.html

こちらのカスタムネットワークを利用して、謎のアプリケーションのネットワークを分けてみてください。  
謎のアプリケーションのスタックを2つ起動し、お互いのスタックが通信できない状態で動作させてください。  

### 追加課題6: docker-compose のカスタムネットワークを実装する

カスタムネットワークを追加課題4のように Docker Compose を利用しないで実装してください。    
